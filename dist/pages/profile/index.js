"use strict";(wx.webpackJsonp=wx.webpackJsonp||[]).push([[481],{4193:function(e,s,a){var n=a(7842),c=a(9379),t=a(1212),r=a(467),i=a(5544),l=a(6540),o=a(118),d=a(758),u=a(3465),m=a(7073),h=a(483),x=a(9107),j=a(4848);var f=function(){var e=(0,u.As)(),s=e.userInfo,a=e.logout,n=(e.updateUserInfo,(0,l.useState)({totalDays:0,totalScore:0,totalQuestions:0,correctRate:0})),f=(0,i.A)(n,2),p=f[0],N=f[1],v=(0,l.useState)({}),S=(0,i.A)(v,2),g=S[0],A=S[1],E=(0,l.useState)(!1),Y=(0,i.A)(E,2),k=Y[0],w=Y[1],b={beginner:{id:"beginner",icon:"ğŸ†",name:"åˆå­¦è€…",desc:"å®Œæˆé¦–æ¬¡ç­”é¢˜"},week:{id:"week",icon:"ğŸ¯",name:"è¿ç»­7å¤©",desc:"è¿ç»­å­¦ä¹ 7å¤©"},perfect:{id:"perfect",icon:"â­",name:"æ»¡åˆ†è¾¾äºº",desc:"è·å¾—10æ¬¡æ»¡åˆ†"},master:{id:"master",icon:"ğŸ“",name:"å­¦ä¹ å¤§å¸ˆ",desc:"ç´¯è®¡ç­”é¢˜500é¢˜"},speed:{id:"speed",icon:"âš¡",name:"å¿«æ‰‹",desc:"ç´¯è®¡ç­”é¢˜100é¢˜"},bookworm:{id:"bookworm",icon:"ğŸ“š",name:"å­¦éœ¸",desc:"ç´¯è®¡è·å¾—1000åˆ†"},scholar:{id:"scholar",icon:"ğŸ“–",name:"åšå­¦è€…",desc:"æ­£ç¡®ç‡90%ä¸”ç­”é¢˜50é¢˜ä»¥ä¸Š"}};(0,l.useEffect)(function(){D()},[p]),(0,d.useDidShow)((0,r.A)((0,t.A)().m(function e(){var s;return(0,t.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,y();case 1:return e.n=2,h.A.checkAdmin();case 2:s=e.v,w(s);case 3:return e.a(2)}},e)}))),(0,l.useEffect)(function(){return x.A.on(x.q.STUDY_RECORD_UPDATED,function(){y(),D()})},[]);var y=function(){var e=(0,r.A)((0,t.A)().m(function e(){var s;return(0,t.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m.A.getStatistics();case 1:s=e.v,N({totalDays:s.totalDays||1,totalScore:s.totalScore||0,totalQuestions:s.totalQuestions||0,correctRate:s.correctRate||0}),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),D=function(){var e=(0,r.A)((0,t.A)().m(function e(){var s;return(0,t.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m.A.getAchievements();case 1:s=e.v,A(s),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),R=[{id:"record",title:"å­¦ä¹ è®°å½•",icon:"ğŸ“–",url:"/pages/study-record/index"},{id:"report",title:"å­¦ä¹ æŠ¥å‘Š",icon:"ğŸ“Š",url:"/pages/study-report/index"},{id:"analysis",title:"å­¦ä¹ åˆ†æ",icon:"ğŸ“ˆ",url:"/pages/study-analysis/index"}],T={id:"settings",title:"è®¾ç½®",icon:"âš™ï¸",action:"settings"},C=[].concat(R,k?[{id:"admin",title:"ç®¡ç†åå°",icon:"ğŸ”",url:"/pages/admin/index"},T]:[T]);return(0,j.jsx)(o.Ss,{className:"profile-page fade-in",children:(0,j.jsxs)(o.BM,{scrollY:!0,className:"content-scroll",children:[(0,j.jsx)(o.Ss,{className:"header-card",children:(0,j.jsxs)(o.Ss,{className:"user-section",children:[(0,j.jsx)(o.Ss,{className:"avatar",children:null!=s&&s.avatar?(0,j.jsx)(o._V,{src:s.avatar,className:"avatar-img"}):(0,j.jsx)(o.EY,{className:"avatar-placeholder",children:"ğŸ‘¤"})}),(0,j.jsxs)(o.Ss,{className:"user-info",children:[(0,j.jsx)(o.EY,{className:"user-name",children:(null==s?void 0:s.nickname)||"åŒå­¦"}),(0,j.jsxs)(o.EY,{className:"user-desc",children:["åšæŒå­¦ä¹ ç¬¬ ",p.totalDays," å¤©"]})]})]})}),(0,j.jsxs)(o.Ss,{className:"stats-section",children:[(0,j.jsxs)(o.Ss,{className:"stat-card",children:[(0,j.jsx)(o.EY,{className:"stat-value",children:p.totalScore}),(0,j.jsx)(o.EY,{className:"stat-label",children:"æ€»å¾—åˆ†"})]}),(0,j.jsxs)(o.Ss,{className:"stat-card",children:[(0,j.jsx)(o.EY,{className:"stat-value",children:p.totalQuestions}),(0,j.jsx)(o.EY,{className:"stat-label",children:"åšé¢˜æ•°"})]}),(0,j.jsxs)(o.Ss,{className:"stat-card",children:[(0,j.jsxs)(o.EY,{className:"stat-value",children:[p.correctRate,"%"]}),(0,j.jsx)(o.EY,{className:"stat-label",children:"æ­£ç¡®ç‡"})]})]}),(0,j.jsxs)(o.Ss,{className:"achievement-section",children:[(0,j.jsx)(o.Ss,{className:"section-header",children:(0,j.jsx)(o.EY,{className:"section-title",children:"æˆ‘çš„æˆå°±"})}),(0,j.jsx)(o.Ss,{className:"achievement-list",children:Object.values(b).map(function(e){var s=g[e.id]||{};return(0,c.A)((0,c.A)({},e),{},{unlocked:s.unlocked||!1,progress:s.progress||"0%"})}).map(function(e){return(0,j.jsxs)(o.Ss,{className:"achievement-item ".concat(e.unlocked?"unlocked":""),children:[(0,j.jsx)(o.EY,{className:"achievement-icon",children:e.icon}),(0,j.jsxs)(o.Ss,{className:"achievement-info",children:[(0,j.jsx)(o.EY,{className:"achievement-name",children:e.name}),(0,j.jsx)(o.EY,{className:"achievement-progress",children:e.progress})]}),e.unlocked&&(0,j.jsx)(o.Ss,{className:"achievement-badge",children:(0,j.jsx)(o.EY,{className:"badge-text",children:"âœ“"})})]},e.id)})})]}),(0,j.jsx)(o.Ss,{className:"menu-section",children:C.map(function(e,s){return(0,j.jsxs)(o.Ss,{className:"menu-item",onClick:function(){return function(e){e.url?(0,d.navigateTo)({url:e.url}):e.action}(e)},children:[(0,j.jsxs)(o.Ss,{className:"menu-left",children:[(0,j.jsx)(o.Ss,{className:"menu-icon",children:(0,j.jsx)(o.EY,{children:e.icon})}),(0,j.jsx)(o.EY,{className:"menu-title",children:e.title})]}),(0,j.jsx)(o.EY,{className:"menu-arrow",children:"â€º"})]},e.id)})}),(0,j.jsx)(o.Ss,{className:"logout-section",children:(0,j.jsx)(o.Ss,{className:"logout-btn",onClick:a,children:"é€€å‡ºç™»å½•"})}),(0,j.jsx)(o.Ss,{style:{height:"40px"}})]})})};Page((0,n.createPageConfig)(f,"pages/profile/index",{root:{cn:[]}},{navigationBarTitleText:"æˆ‘çš„"}||{}))}},function(e){e.O(0,[907,96,76],function(){return s=4193,e(e.s=s);var s});e.O()}]);