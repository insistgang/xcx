"use strict";(wx.webpackJsonp=wx.webpackJsonp||[]).push([[151],{1465:function(e,s,t){var n=t(7842),a=t(1212),c=t(467),i=t(5544),r=t(6540),l=t(118),o=t(758),u=t.n(o),d=t(4198),h=t(9107),m=t(4848);new Set;var x=function(){var e=(0,r.useState)([]),s=(0,i.A)(e,2),t=s[0],n=s[1],x=(0,r.useState)(!0),p=(0,i.A)(x,2),j=p[0],N=p[1],f=(0,r.useState)({total:0,practiced:0}),v=(0,i.A)(f,2),S=v[0],g=v[1];(0,o.useDidShow)(function(){return y(),h.A.on(h.q.STUDY_RECORD_UPDATED,E),function(){h.A.off(h.q.STUDY_RECORD_UPDATED,E)}});var E=function(e){y()},Y=function(){var e=(0,c.A)((0,a.A)().m(function e(s){var t,n,c,i;return(0,a.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(0!==s.length){e.n=1;break}return e.a(2,0);case 1:return e.p=1,t=u().cloud.database(),e.n=2,t.collection("answer_history").where({questionId:t.RegExp.create("^(".concat(s.join("|"),")$"))}).get();case 2:return n=e.v,c=n.data,i=new Set(c.map(function(e){return e.questionId})),e.a(2,i.size);case 3:return e.p=3,e.v,e.a(2,0)}},e,null,[[1,3]])}));return function(s){return e.apply(this,arguments)}}(),y=function(){var e=(0,c.A)((0,a.A)().m(function e(){var s,t,c,i;return(0,a.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return N(!0),e.p=1,e.n=2,d.A.getFavorites(1,100);case 2:return s=e.v,t=(s||[]).map(function(e){return e.id||e._id}),c=t.length,e.n=3,Y(t);case 3:i=e.v,n(s||[]),g({total:c,practiced:i}),e.n=5;break;case 4:e.p=4,e.v,n([]);case 5:return e.p=5,N(!1),e.f(5);case 6:return e.a(2)}},e,null,[[1,4,5,6]])}));return function(){return e.apply(this,arguments)}}(),A=function(e){return{pinyin:"æ‹¼éŸ³",literature:"è¯—è¯",idiom:"æˆè¯­",vocabulary:"è¯æ±‡",correction:"ç—…å¥"}[e]||"æœªçŸ¥"};return(0,m.jsx)(l.Ss,{className:"favorite-practice-page",children:(0,m.jsxs)(l.BM,{scrollY:!0,className:"content-scroll",children:[(0,m.jsx)(l.Ss,{className:"stats-header",children:(0,m.jsxs)(l.Ss,{className:"stats-card",children:[(0,m.jsx)(l.Ss,{className:"stats-icon",children:"â­"}),(0,m.jsx)(l.EY,{className:"stats-title",children:"æ”¶è—å¤¹"}),(0,m.jsx)(l.EY,{className:"stats-subtitle",children:"é‡ç‚¹é¢˜ç›®é›†ä¸­ç»ƒä¹ "}),(0,m.jsxs)(l.Ss,{className:"stats-numbers",children:[(0,m.jsxs)(l.Ss,{className:"stat-item",children:[(0,m.jsx)(l.EY,{className:"stat-value",children:S.total}),(0,m.jsx)(l.EY,{className:"stat-label",children:"æ”¶è—æ€»æ•°"})]}),(0,m.jsx)(l.Ss,{className:"stat-divider"}),(0,m.jsxs)(l.Ss,{className:"stat-item",children:[(0,m.jsx)(l.EY,{className:"stat-value",children:S.practiced}),(0,m.jsx)(l.EY,{className:"stat-label",children:"å·²ç»ƒä¹ "})]})]}),t.length>0&&(0,m.jsx)(l.Ss,{className:"practice-btn",onClick:function(){0!==t.length&&(0,o.navigateTo)({url:"/pages/exercise-detail/index?mode=favorite&count=".concat(Math.min(10,t.length))})},children:(0,m.jsx)(l.EY,{className:"practice-btn-text",children:"å¼€å§‹ç»ƒä¹ "})})]})}),(0,m.jsxs)(l.Ss,{className:"questions-section",children:[(0,m.jsxs)(l.Ss,{className:"section-header",children:[(0,m.jsx)(l.EY,{className:"section-title",children:"æ”¶è—åˆ—è¡¨"}),(0,m.jsxs)(l.EY,{className:"section-count",children:["å…± ",t.length," é¢˜"]})]}),j?(0,m.jsx)(l.Ss,{className:"loading-state",children:(0,m.jsx)(l.EY,{children:"åŠ è½½ä¸­..."})}):t.length>0?(0,m.jsx)(l.Ss,{className:"question-list",children:t.map(function(e,s){return(0,m.jsxs)(l.Ss,{className:"question-item",onClick:function(){return function(e){var s=encodeURIComponent(JSON.stringify({id:e.id,type:e.type,question:e.question,options:e.options,correctAnswer:e.correctAnswer,explanation:e.explanation||""}));(0,o.navigateTo)({url:"/pages/exercise-detail/index?mode=single&questionData=".concat(s)})}(e)},children:[(0,m.jsxs)(l.Ss,{className:"question-header",children:[(0,m.jsx)(l.Ss,{className:"type-badge",style:{backgroundColor:(t=e.type,{pinyin:"#10B981",literature:"#8B5CF6",idiom:"#F59E0B",vocabulary:"#4A90E2",correction:"#EF4444"}[t]||"#6B7280")},children:(0,m.jsx)(l.EY,{className:"type-text",children:A(e.type)})}),(0,m.jsxs)(l.EY,{className:"question-index",children:["ç¬¬ ",s+1," é¢˜"]})]}),(0,m.jsx)(l.EY,{className:"question-content",children:e.question}),(0,m.jsxs)(l.Ss,{className:"question-footer",children:[(0,m.jsxs)(l.EY,{className:"question-id",children:["ID: ",e.id]}),(0,m.jsx)(l.EY,{className:"favorite-icon",children:"â­ å·²æ”¶è—"})]})]},e.id||s);var t})}):(0,m.jsxs)(l.Ss,{className:"empty-state",children:[(0,m.jsx)(l.EY,{className:"empty-icon",children:"â­"}),(0,m.jsx)(l.EY,{className:"empty-text",children:"æš‚æ— æ”¶è—"}),(0,m.jsx)(l.EY,{className:"empty-tip",children:"åšé¢˜æ—¶ç‚¹å‡»æ˜Ÿå·æ”¶è—é¢˜ç›®"})]})]}),t.length>0&&(0,m.jsx)(l.Ss,{className:"tips-section",children:(0,m.jsxs)(l.Ss,{className:"tips-card",children:[(0,m.jsx)(l.EY,{className:"tips-icon",children:"ğŸ’¡"}),(0,m.jsx)(l.EY,{className:"tips-title",children:"æ”¶è—å»ºè®®"}),(0,m.jsxs)(l.EY,{className:"tips-content",children:["1. æ”¶è—ç»å…¸é¢˜å‹ï¼Œæ–¹ä¾¿éšæ—¶å¤ä¹ ","\n","2. æ”¶è—éš¾é¢˜é”™é¢˜ï¼Œé’ˆå¯¹æ€§ç»ƒä¹ æå‡","\n","3. å®šæœŸæ¸…ç†æ”¶è—ï¼Œä¿æŒæ”¶è—å¤¹ç²¾ç®€"]})]})}),(0,m.jsx)(l.Ss,{style:{height:"100rpx"}})]})})};Page((0,n.createPageConfig)(x,"pages/favorite-practice/index",{root:{cn:[]}},{navigationBarTitleText:"æ”¶è—ç»ƒä¹ ",navigationBarBackgroundColor:"#4A90E2",navigationBarTextStyle:"white"}||{}))}},function(e){e.O(0,[907,96,76],function(){return s=1465,e(e.s=s);var s});e.O()}]);