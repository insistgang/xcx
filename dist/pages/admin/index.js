"use strict";(wx.webpackJsonp=wx.webpackJsonp||[]).push([[988],{933:function(s,e,a){var t=a(7842),l=a(1212),c=a(467),n=a(5544),i=a(6540),r=a(118),d=a(758),u=a(483),o=a(4848);var m=function(){var s,e,a,t,m,h=(0,i.useState)(null),x=(0,n.A)(h,2),j=x[0],N=x[1],v=(0,i.useState)(!0),S=(0,n.A)(v,2),p=S[0],Y=S[1],E=(0,i.useState)([]),f=(0,n.A)(E,2),g=f[0],b=f[1],y=(0,i.useState)(1),w=(0,n.A)(y,2),A=w[0],k=w[1],C=(0,i.useState)(1),D=(0,n.A)(C,2),O=D[0],P=D[1],T=(0,i.useState)("stats"),B=(0,n.A)(T,2),J=B[0],L=B[1];(0,d.useDidShow)(function(){M()});var M=function(){var s=(0,c.A)((0,l.A)().m(function s(){var e;return(0,l.A)().w(function(s){for(;;)switch(s.p=s.n){case 0:return Y(!0),s.p=1,s.n=2,u.A.getStats();case 2:e=s.v,N(e),s.n=4;break;case 3:s.p=3,s.v;case 4:return s.p=4,Y(!1),s.f(4);case 5:return s.a(2)}},s,null,[[1,3,4,5]])}));return function(){return s.apply(this,arguments)}}(),Q=function(){var s=(0,c.A)((0,l.A)().m(function s(){var e,a,t=arguments;return(0,l.A)().w(function(s){for(;;)switch(s.p=s.n){case 0:return e=t.length>0&&void 0!==t[0]?t[0]:1,Y(!0),s.p=1,s.n=2,u.A.getUserList(e,20);case 2:a=s.v,b(a.list||[]),P(a.totalPages||1),k(a.page||1),s.n=4;break;case 3:s.p=3,s.v;case 4:return s.p=4,Y(!1),s.f(4);case 5:return s.a(2)}},s,null,[[1,3,4,5]])}));return function(){return s.apply(this,arguments)}}(),U=function(s){L(s),"users"===s&&0===g.length&&Q(1)};return(0,o.jsxs)(r.Ss,{className:"admin-page",children:[(0,o.jsxs)(r.Ss,{className:"tab-bar",children:[(0,o.jsx)(r.Ss,{className:"tab-item ".concat("stats"===J?"active":""),onClick:function(){return U("stats")},children:(0,o.jsx)(r.EY,{className:"tab-text",children:"æ•°æ®æ€»è§ˆ"})}),(0,o.jsx)(r.Ss,{className:"tab-item ".concat("users"===J?"active":""),onClick:function(){return U("users")},children:(0,o.jsx)(r.EY,{className:"tab-text",children:"ç”¨æˆ·ç®¡ç†"})})]}),(0,o.jsxs)(r.BM,{scrollY:!0,className:"content-scroll",children:[p&&!j?(0,o.jsx)(r.Ss,{className:"loading-state",children:(0,o.jsx)(r.EY,{children:"åŠ è½½ä¸­..."})}):"stats"===J?(0,o.jsxs)(r.Ss,{className:"stats-container",children:[(0,o.jsxs)(r.Ss,{className:"stats-section",children:[(0,o.jsx)(r.Ss,{className:"section-title",children:(0,o.jsx)(r.EY,{className:"title-text",children:"ðŸ‘¥ ç”¨æˆ·ç»Ÿè®¡"})}),(0,o.jsxs)(r.Ss,{className:"stats-grid",children:[(0,o.jsxs)(r.Ss,{className:"stat-card",children:[(0,o.jsx)(r.EY,{className:"stat-value",children:(null==j||null===(s=j.users)||void 0===s?void 0:s.total)||0}),(0,o.jsx)(r.EY,{className:"stat-label",children:"æ€»ç”¨æˆ·æ•°"})]}),(0,o.jsxs)(r.Ss,{className:"stat-card",children:[(0,o.jsxs)(r.EY,{className:"stat-value",children:["+",(null==j||null===(e=j.users)||void 0===e?void 0:e.todayNew)||0]}),(0,o.jsx)(r.EY,{className:"stat-label",children:"ä»Šæ—¥æ–°å¢ž"})]})]})]}),(0,o.jsxs)(r.Ss,{className:"stats-section",children:[(0,o.jsx)(r.Ss,{className:"section-title",children:(0,o.jsx)(r.EY,{className:"title-text",children:"ðŸ“ ç­”é¢˜ç»Ÿè®¡"})}),(0,o.jsxs)(r.Ss,{className:"stats-grid",children:[(0,o.jsxs)(r.Ss,{className:"stat-card",children:[(0,o.jsx)(r.EY,{className:"stat-value",children:(null==j||null===(a=j.answers)||void 0===a?void 0:a.total)||0}),(0,o.jsx)(r.EY,{className:"stat-label",children:"æ€»ç­”é¢˜æ•°"})]}),(0,o.jsxs)(r.Ss,{className:"stat-card",children:[(0,o.jsx)(r.EY,{className:"stat-value",children:(null==j||null===(t=j.answers)||void 0===t?void 0:t.correct)||0}),(0,o.jsx)(r.EY,{className:"stat-label",children:"æ­£ç¡®ç­”é¢˜"})]}),(0,o.jsxs)(r.Ss,{className:"stat-card",children:[(0,o.jsxs)(r.EY,{className:"stat-value",children:[(null==j||null===(m=j.answers)||void 0===m?void 0:m.accuracy)||0,"%"]}),(0,o.jsx)(r.EY,{className:"stat-label",children:"æ­£ç¡®çŽ‡"})]})]})]}),(0,o.jsxs)(r.Ss,{className:"stats-section",children:[(0,o.jsx)(r.Ss,{className:"section-title",children:(0,o.jsx)(r.EY,{className:"title-text",children:"ðŸ“Š å…¶ä»–ç»Ÿè®¡"})}),(0,o.jsxs)(r.Ss,{className:"stats-grid",children:[(0,o.jsxs)(r.Ss,{className:"stat-card",children:[(0,o.jsx)(r.EY,{className:"stat-value",children:(null==j?void 0:j.favorites)||0}),(0,o.jsx)(r.EY,{className:"stat-label",children:"æ”¶è—é¢˜ç›®"})]}),(0,o.jsxs)(r.Ss,{className:"stat-card",children:[(0,o.jsx)(r.EY,{className:"stat-value",children:(null==j?void 0:j.wrongQuestions)||0}),(0,o.jsx)(r.EY,{className:"stat-label",children:"é”™é¢˜æ€»æ•°"})]})]})]}),(0,o.jsxs)(r.Ss,{className:"stats-section",children:[(0,o.jsx)(r.Ss,{className:"section-title",children:(0,o.jsx)(r.EY,{className:"title-text",children:"ðŸ“‹ é¢˜åž‹åˆ†å¸ƒ"})}),(0,o.jsx)(r.Ss,{className:"type-stats",children:null!=j&&j.typeDistribution&&Object.keys(j.typeDistribution).length>0?Object.entries(j.typeDistribution).map(function(s){var e=(0,n.A)(s,2),a=e[0],t=e[1];return(0,o.jsxs)(r.Ss,{className:"type-stat-item",children:[(0,o.jsx)(r.EY,{className:"type-name",children:a}),(0,o.jsxs)(r.EY,{className:"type-count",children:[t," æ¬¡"]})]},a)}):(0,o.jsx)(r.EY,{className:"empty-text",children:"æš‚æ— æ•°æ®"})})]}),(0,o.jsx)(r.Ss,{className:"action-bar",children:(0,o.jsx)(r.Ss,{className:"refresh-btn",onClick:M,children:(0,o.jsx)(r.EY,{className:"refresh-text",children:"ðŸ”„ åˆ·æ–°æ•°æ®"})})})]}):(0,o.jsxs)(r.Ss,{className:"users-container",children:[(0,o.jsxs)(r.Ss,{className:"users-header",children:[(0,o.jsx)(r.EY,{className:"users-title",children:"ç”¨æˆ·åˆ—è¡¨"}),(0,o.jsxs)(r.EY,{className:"users-count",children:["å…± ",g.length," æ¡"]})]}),0===g.length?(0,o.jsx)(r.Ss,{className:"empty-state",children:(0,o.jsx)(r.EY,{className:"empty-text",children:"æš‚æ— ç”¨æˆ·"})}):(0,o.jsx)(r.Ss,{className:"user-list",children:g.map(function(s,e){var a,t,l;return(0,o.jsxs)(r.Ss,{className:"user-item",onClick:function(){return function(s){(0,d.navigateTo)({url:"/pages/admin/user-detail/index?openid=".concat(s.openid)})}(s)},children:[(0,o.jsx)(r.Ss,{className:"user-avatar",children:(0,o.jsx)(r.EY,{className:"avatar-text",children:(null===(a=s.nickName)||void 0===a?void 0:a.charAt(0))||"ç”¨"})}),(0,o.jsxs)(r.Ss,{className:"user-info",children:[(0,o.jsx)(r.EY,{className:"user-name",children:s.nickName||"æœªè®¾ç½®"}),(0,o.jsxs)(r.Ss,{className:"user-stats-mini",children:[(0,o.jsxs)(r.EY,{className:"stat-mini",children:["ç­”é¢˜",(null===(t=s.stats)||void 0===t?void 0:t.answerCount)||0]}),(0,o.jsxs)(r.EY,{className:"stat-mini",children:["æ­£ç¡®çŽ‡",(null===(l=s.stats)||void 0===l?void 0:l.accuracy)||0,"%"]})]})]}),(0,o.jsx)(r.EY,{className:"user-arrow",children:"â€º"})]},s.openid)})}),O>1&&(0,o.jsxs)(r.Ss,{className:"pagination",children:[A>1&&(0,o.jsx)(r.Ss,{className:"page-btn",onClick:function(){return Q(A-1)},children:(0,o.jsx)(r.EY,{children:"ä¸Šä¸€é¡µ"})}),(0,o.jsxs)(r.EY,{className:"page-info",children:[A," / ",O]}),A<O&&(0,o.jsx)(r.Ss,{className:"page-btn",onClick:function(){return Q(A+1)},children:(0,o.jsx)(r.EY,{children:"ä¸‹ä¸€é¡µ"})})]})]}),(0,o.jsx)(r.Ss,{style:{height:"100rpx"}})]})]})};Page((0,t.createPageConfig)(m,"pages/admin/index",{root:{cn:[]}},{navigationBarTitleText:"ç®¡ç†åŽå°"}||{}))}},function(s){s.O(0,[907,96,76],function(){return e=933,s(s.s=e);var e});s.O()}]);