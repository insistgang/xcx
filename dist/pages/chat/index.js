"use strict";(wx.webpackJsonp=wx.webpackJsonp||[]).push([[947],{3078:function(n,e,t){var s,a=t(7842),r=t(1212),c=t(436),i=t(467),o=t(5544),u=t(6540),l=t(118),d=t(758),f=t.n(d),h=t(9379),m=t(3029),p=t(2901),v=t(4467),A=t(4789),g=t(7724),y="chat_history_local",w={"æ¯”å–»":'æ¯”å–»æ˜¯ä¸€ç§ä¿®è¾æ‰‹æ³•ï¼Œç”¨è·Ÿç”²äº‹ç‰©æœ‰ç›¸ä¼¼ä¹‹ç‚¹çš„ä¹™äº‹ç‰©æ¥æå†™æˆ–è¯´æ˜ç”²äº‹ç‰©ã€‚æ¯”å–»ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šæœ¬ä½“ï¼ˆè¢«æ¯”å–»çš„äº‹ç‰©ï¼‰ã€å–»ä½“ï¼ˆç”¨æ¥æ¯”å–»çš„äº‹ç‰©ï¼‰å’Œæ¯”å–»è¯ï¼ˆå¦‚"åƒ""å¥½åƒ""ä»¿ä½›"ç­‰ï¼‰ã€‚\n\nä¾‹å¦‚ï¼š"æœˆäº®åƒåœ†ç›˜"ä¸­ï¼Œæœˆäº®æ˜¯æœ¬ä½“ï¼Œåœ†ç›˜æ˜¯å–»ä½“ï¼Œåƒæ˜¯æ¯”å–»è¯ã€‚',"æ˜å–»":'æ˜å–»æ˜¯æ¯”å–»çš„ä¸€ç§ï¼Œæœ¬ä½“ã€å–»ä½“éƒ½å‡ºç°ï¼Œä¸­é—´ç”¨"åƒ""å¥½åƒ""ä»¿ä½›""çŠ¹å¦‚"ç­‰æ¯”å–»è¯è¿æ¥ã€‚\n\nä¾‹å¦‚ï¼š"å¼¯å¼¯çš„æœˆäº®åƒå°èˆ¹ã€‚"',"æš—å–»":'æš—å–»æ˜¯æ¯”å–»çš„ä¸€ç§ï¼Œæœ¬ä½“ã€å–»ä½“éƒ½å‡ºç°ï¼Œä¸­é—´ç”¨"æ˜¯""å˜æˆ""æˆä¸º""ç­‰äº"ç­‰è¯è¿æ¥ã€‚\n\nä¾‹å¦‚ï¼š"è€å¸ˆæ˜¯è¾›å‹¤çš„å›­ä¸ã€‚"',"å€Ÿå–»":'å€Ÿå–»æ˜¯æ¯”å–»çš„ä¸€ç§ï¼Œåªå‡ºç°å–»ä½“ï¼Œä¸å‡ºç°æœ¬ä½“å’Œæ¯”å–»è¯ã€‚\n\nä¾‹å¦‚ï¼š"è½å…‰äº†å¶å­çš„æ ‘æä¸Šï¼ŒæŒ‚æ»¡äº†äº®æ™¶æ™¶çš„é“¶æ¡å„¿"ï¼ˆå€Ÿå–»é›ªæŒ‚ï¼‰ã€‚',"æ‹Ÿäºº":'æ‹Ÿäººæ˜¯ä¸€ç§ä¿®è¾æ‰‹æ³•ï¼ŒæŠŠäº‹ç‰©äººæ ¼åŒ–ï¼Œå°†æœ¬æ¥ä¸å…·å¤‡äººåŠ¨ä½œå’Œæ„Ÿæƒ…çš„äº‹ç‰©ï¼Œå˜æˆå’Œäººä¸€æ ·å…·æœ‰åŠ¨ä½œå’Œæ„Ÿæƒ…çš„æ ·å­ã€‚\n\nä¾‹å¦‚ï¼š"èŠ±å„¿åœ¨é£ä¸­å¾®ç¬‘ã€‚"',"æ„è±¡":"å¤è¯—ä¸­å¸¸ç”¨çš„æ„è±¡æœ‰ï¼š\n\n1. æœˆäº®ï¼šè±¡å¾æ€ä¹¡ã€å›¢åœ†ã€ç¾å¥½\n2. æŸ³æ ‘ï¼šè±¡å¾ç¦»åˆ«ã€æŒ½ç•™\n3. èŠèŠ±ï¼šè±¡å¾é«˜æ´ã€éšé€¸\n4. æ¢…èŠ±ï¼šè±¡å¾åšå¼ºã€é«˜æ´\n5. æ¾æŸï¼šè±¡å¾åšè´ã€ä¸å±ˆ\n6. è·èŠ±ï¼šè±¡å¾é«˜æ´ã€å‡ºæ·¤æ³¥è€Œä¸æŸ“\n7. æœé¹ƒï¼šè±¡å¾å“€æ€¨ã€æ€ä¹¡\n8. é¸¿é›ï¼šè±¡å¾ä¹¦ä¿¡ã€æ€å¿µ","æ€ä¹¡":'å¤è¯—ä¸­è¡¨è¾¾æ€ä¹¡ä¹‹æƒ…çš„å¸¸ç”¨æ„è±¡å’Œè¯—å¥ï¼š\n\nâ€¢ æœˆäº®ï¼š"ä¸¾å¤´æœ›æ˜æœˆï¼Œä½å¤´æ€æ•…ä¹¡"\nâ€¢ æŸ³æ ‘ï¼š"æ˜”æˆ‘å¾€çŸ£ï¼Œæ¨æŸ³ä¾ä¾"\nâ€¢ é¸¿é›ï¼š"é¸¿é›é•¿é£å…‰ä¸åº¦"\nâ€¢ æ¢§æ¡ï¼š"æ¢§æ¡æ›´å…¼ç»†é›¨ï¼Œåˆ°é»„æ˜ç‚¹ç‚¹æ»´æ»´"',"è¿‘ä¹‰è¯":'åŒºåˆ†è¿‘ä¹‰è¯çš„æ–¹æ³•ï¼š\n\n1. è¯ä¹‰è½»é‡ä¸åŒï¼šå¦‚"æ‰¹è¯„"ä¸"æ‰¹åˆ¤"\n2. è¯ä¹‰èŒƒå›´ä¸åŒï¼šå¦‚"æˆ˜äº‰"ä¸"æˆ˜å½¹"\n3. æ„Ÿæƒ…è‰²å½©ä¸åŒï¼šå¦‚"æœæ–­"ä¸"æ­¦æ–­"\n4. æ­é…å…³ç³»ä¸åŒï¼šå¦‚"å‘æŒ¥"ä¸"å‘æ‰¬"\n\nå»ºè®®é€šè¿‡å¤šè¯»å¤šå†™ã€æŸ¥å­—å…¸ã€æ¯”è¾ƒè¾¨ææ¥æŒæ¡ã€‚',"åä¹‰è¯":'åä¹‰è¯æ˜¯æŒ‡æ„ä¹‰ç›¸åæˆ–ç›¸å¯¹çš„è¯ã€‚\n\næ„æˆåä¹‰å…³ç³»çš„è¯å¿…é¡»å±äºåŒä¸€æ„ä¹‰èŒƒç•´ï¼Œå¦‚"é•¿"å’Œ"çŸ­"ï¼ˆé•¿åº¦èŒƒç•´ï¼‰ï¼Œ"å¤"å’Œ"ä»Š"ï¼ˆæ—¶é—´èŒƒç•´ï¼‰ã€‚\n\næ³¨æ„ï¼šå¹¶éæ‰€æœ‰è¯éƒ½æœ‰åä¹‰è¯ï¼Œå¦‚"ä¹¦""æ¡Œå­"ç­‰åè¯å°±æ²¡æœ‰åä¹‰è¯ã€‚',"ç—…å¥":"å¸¸è§çš„ç—…å¥ç±»å‹åŠä¿®æ”¹æ–¹æ³•ï¼š\n\n1. æˆåˆ†æ®‹ç¼ºï¼šç¼ºä¸»è¯­ã€è°“è¯­ã€å®¾è¯­\n   ä¿®æ”¹ï¼šè¡¥å……æ®‹ç¼ºæˆåˆ†\n\n2. æ­é…ä¸å½“ï¼šä¸»è°“ã€åŠ¨å®¾ã€ä¿®é¥°è¯­ä¸ä¸­å¿ƒè¯­æ­é…ä¸å½“\n   ä¿®æ”¹ï¼šè°ƒæ•´è¯è¯­ä½¿æ­é…æ°å½“\n\n3. è¯­åºä¸å½“ï¼šå®šè¯­ã€çŠ¶è¯­ã€è¡¥è¯­ä½ç½®ä¸å½“\n   ä¿®æ”¹ï¼šè°ƒæ•´è¯è¯­é¡ºåº\n\n4. ç»“æ„æ··ä¹±ï¼šå¥å¼æ‚ç³…ã€ä¸­é€”æ˜“è¾™\n   ä¿®æ”¹ï¼šç†æ¸…ç»“æ„ï¼Œæ”¹ä¸ºå•ä¸€å¥å¼","è¯­æ³•":"è¯­æ–‡è¯­æ³•åŸºç¡€çŸ¥è¯†ï¼š\n\n1. è¯ç±»ï¼šåã€åŠ¨ã€å½¢ã€æ•°ã€é‡ã€ä»£ã€å‰¯ã€ä»‹ã€è¿ã€åŠ©ã€å¹ã€æ‹Ÿå£°\n2. å¥å­æˆåˆ†ï¼šä¸»ã€è°“ã€å®¾ã€å®šã€çŠ¶ã€è¡¥\n3. å¥å¼ï¼šé™ˆè¿°å¥ã€ç–‘é—®å¥ã€ç¥ˆä½¿å¥ã€æ„Ÿå¹å¥\n4. å¤å¥ç±»å‹ï¼šå¹¶åˆ—ã€é€’è¿›ã€é€‰æ‹©ã€è½¬æŠ˜ã€å› æœã€å‡è®¾ã€æ¡ä»¶","ä½œæ–‡":"å†™å¥½ä½œæ–‡çš„è¦ç‚¹ï¼š\n\n1. å¼€å¤´ï¼šè¦å¸å¼•äººï¼Œå¯ä»¥å¼€é—¨è§å±±ã€è®¾ç½®æ‚¬å¿µã€å¼•ç”¨åè¨€\n2. ä¸­é—´ï¼šè¦æœ‰å…·ä½“äº‹ä¾‹ï¼Œè¯¦ç•¥å¾—å½“ï¼Œæœ‰ç»†èŠ‚æå†™\n3. ç»“å°¾ï¼šè¦ç‚¹é¢˜ï¼Œå¯ä»¥æ€»ç»“å…¨æ–‡ã€å‘¼åº”å¼€å¤´ã€å‘äººæ·±çœ\n4. è¯­è¨€ï¼šè¦ç”ŸåŠ¨å½¢è±¡ï¼Œè¿ç”¨ä¿®è¾æ‰‹æ³•\n5. æƒ…æ„Ÿï¼šè¦çœŸæŒšæ„Ÿäºº","å¼€å¤´":'å¥½çš„ä½œæ–‡å¼€å¤´æ–¹æ³•ï¼š\n\n1. å¼€é—¨è§å±±ï¼šç›´æ¥ç‚¹æ˜ä¸»é¢˜\n2. è®¾ç½®æ‚¬å¿µï¼šå¼•èµ·è¯»è€…å…´è¶£\n3. å¼•ç”¨åè¨€ï¼šå¢åŠ æ–‡é‡‡\n4. æå†™ç¯å¢ƒï¼šçƒ˜æ‰˜æ°”æ°›\n5. æŠ’æƒ…è®®è®ºï¼šè¡¨è¾¾æƒ…æ„Ÿè§‚ç‚¹\n\nä¾‹å¦‚ï¼š"æ˜¥å¤©åˆåˆ°äº†ï¼Œæœ›ç€çª—å¤–é‚£ç‰‡æ–°ç»¿ï¼Œæˆ‘ä¸ç¦æƒ³èµ·äº†å¥¶å¥¶..."',"æ–‡è¨€æ–‡":'æ–‡è¨€æ–‡è™šè¯å¸¸ç”¨ç”¨æ³•ï¼š\n\nä¹‹ï¼šâ‘ ä»£è¯ â‘¡åŠ©è¯"çš„" â‘¢åŠ¨è¯"å»"\n\nè€Œï¼šâ‘ è¿è¯è¡¨å¹¶åˆ— â‘¡è¿è¯è¡¨æ‰¿æ¥ â‘¢è¿è¯è¡¨è½¬æŠ˜\n\nä»¥ï¼šâ‘ ä»‹è¯"ç”¨ã€å‡­å€Ÿ" â‘¡è¿è¯"å› ä¸º" â‘¢è¿è¯"æ¥"\n\näºï¼šâ‘ ä»‹è¯"åœ¨" â‘¡ä»‹è¯"å‘" â‘¢ä»‹è¯"å¯¹"\n\nä¸ºï¼šâ‘ åŠ¨è¯"æ˜¯ã€åš" â‘¡ä»‹è¯"è¢«ã€æ›¿" â‘¢ä»‹è¯"ä¸ºäº†"',"æ ‡ç‚¹":'å¸¸ç”¨æ ‡ç‚¹ç¬¦å·ç”¨æ³•ï¼š\n\n1. å¥å·ï¼ˆã€‚ï¼‰ï¼šé™ˆè¿°å¥æœ«å°¾\n2. é—®å·ï¼ˆï¼Ÿï¼‰ï¼šç–‘é—®å¥æœ«å°¾\n3. å¹å·ï¼ˆï¼ï¼‰ï¼šæ„Ÿå¹å¥æœ«å°¾\n4. é€—å·ï¼ˆï¼Œï¼‰ï¼šå¥å­ä¸­é—´åœé¡¿\n5. åˆ†å·ï¼ˆï¼›ï¼‰ï¼šå¹¶åˆ—åˆ†å¥ä¹‹é—´\n6. å†’å·ï¼ˆï¼šï¼‰ï¼šæç¤ºä¸‹æ–‡\n7. å¼•å·ï¼ˆ""""ï¼‰ï¼šå¼•ç”¨ã€å¼ºè°ƒ\n8. ç ´æŠ˜å·ï¼ˆâ€”â€”ï¼‰ï¼šè§£é‡Šã€è½¬æŠ˜',default:"æ„Ÿè°¢ä½ çš„æé—®ï¼ä½œä¸ºè¯­æ–‡å­¦ä¹ åŠ©æ‰‹ï¼Œæˆ‘å¯ä»¥å¸®ä½ è§£ç­”å…³äºï¼š\n\nâ€¢ è¯è¯­é‡Šä¹‰ã€è¿‘ä¹‰è¯ã€åä¹‰è¯\nâ€¢ å¤è¯—è¯èµæå’Œæ„è±¡\nâ€¢ ä¿®è¾æ‰‹æ³•å’Œè¯­æ³•çŸ¥è¯†\nâ€¢ æ–‡è¨€æ–‡åŸºç¡€çŸ¥è¯†\nâ€¢ å†™ä½œæŠ€å·§å’Œä½œæ–‡æ–¹æ³•\n\nè¯·æå‡ºä½ çš„å…·ä½“é—®é¢˜ï¼Œæˆ‘ä¼šå°½åŠ›ä¸ºä½ è§£ç­”ï¼"},x=(s={"æ¯”å–»":"æ¯”å–»","æ˜å–»":"æ˜å–»","æš—å–»":"æš—å–»","å€Ÿå–»":"å€Ÿå–»","æ‹Ÿäºº":"æ‹Ÿäºº","å¤¸å¼ ":"æ¯”å–»","æ’æ¯”":"ä½œæ–‡","è¿‘ä¹‰è¯":"è¿‘ä¹‰è¯","åä¹‰è¯":"åä¹‰è¯","åŒä¹‰è¯":"è¿‘ä¹‰è¯","æ„è±¡":"æ„è±¡","æ€ä¹¡":"æ€ä¹¡"},(0,v.A)((0,v.A)((0,v.A)((0,v.A)((0,v.A)((0,v.A)((0,v.A)((0,v.A)((0,v.A)((0,v.A)(s,"æ€ä¹¡","æ€ä¹¡"),"å®¶ä¹¡","æ€ä¹¡"),"ç—…å¥","ç—…å¥"),"ä¿®æ”¹","ç—…å¥"),"è¯­æ³•","è¯­æ³•"),"ä½œæ–‡","ä½œæ–‡"),"å†™ä½œ","ä½œæ–‡"),"å¼€å¤´","å¼€å¤´"),"ç»“å°¾","ä½œæ–‡"),"æ–‡è¨€æ–‡","æ–‡è¨€æ–‡"),(0,v.A)((0,v.A)((0,v.A)((0,v.A)(s,"è™šè¯","æ–‡è¨€æ–‡"),"å®è¯","æ–‡è¨€æ–‡"),"æ ‡ç‚¹","æ ‡ç‚¹"),"ç¬¦å·","æ ‡ç‚¹")),j=function(){return(0,p.A)(function n(){(0,m.A)(this,n)},[{key:"loadLocalHistory",value:function(){try{return f().getStorageSync(y)||[]}catch(n){return[]}}},{key:"saveLocalHistory",value:function(n){try{var e=n.slice(-100);f().setStorageSync(y,e)}catch(n){}}},{key:"addMessageToLocal",value:function(n){var e=this.loadLocalHistory();e.push((0,h.A)((0,h.A)({},n),{},{timestamp:Date.now()})),this.saveLocalHistory(e)}},{key:"clearLocalHistory",value:function(){try{f().removeStorageSync(y)}catch(n){}}},{key:"findLocalAnswer",value:function(n){for(var e=n.toLowerCase().trim(),t=0,s=Object.entries(x);t<s.length;t++){var a=(0,o.A)(s[t],2),r=a[0],c=a[1];if(e.includes(r))return w[c]||w.default}if(e.includes("ä»€ä¹ˆæ˜¯")||e.includes("ä»€ä¹ˆ"))for(var i=0,u=Object.entries(x);i<u.length;i++){var l=(0,o.A)(u[i],2),d=l[0],f=l[1];if(e.includes(d))return w[f]||w.default}if(e.includes("å¦‚ä½•")||e.includes("æ€æ ·")||e.includes("æ€ä¹ˆ")){if(e.includes("åŒºåˆ†")||e.includes("è¿‘ä¹‰è¯")||e.includes("åä¹‰è¯"))return w["è¿‘ä¹‰è¯"];if(e.includes("ä¿®æ”¹")||e.includes("ç—…å¥"))return w["ç—…å¥"];if(e.includes("å†™")||e.includes("ä½œæ–‡"))return w["ä½œæ–‡"]}return w.default}},{key:"sendMessage",value:(u=(0,i.A)((0,r.A)().m(function n(e){var t,s,a,c,i=arguments;return(0,r.A)().w(function(n){for(;;)switch(n.p=n.n){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:null,this.addMessageToLocal({id:Date.now(),role:"user",content:e}),f().showLoading({title:"æ€è€ƒä¸­..."}),n.p=1,n.n=2,(0,A.g)(g.Ab.CHAT,{action:"sendMessage",message:e,conversationId:t});case 2:if(!(s=n.v)||!s.success){n.n=3;break}return this.addMessageToLocal({id:s.data.messageId||Date.now()+1,role:"assistant",content:s.data.reply}),n.a(2,s.data);case 3:throw new Error((null==s?void 0:s.message)||"å‘é€å¤±è´¥");case 4:return n.p=4,n.v,a=this.findLocalAnswer(e),c={messageId:Date.now(),reply:a,fromLocal:!0},this.addMessageToLocal({id:c.messageId,role:"assistant",content:a}),n.a(2,c);case 5:return n.p=5,f().hideLoading(),n.f(5);case 6:return n.a(2)}},n,this,[[1,4,5,6]])})),function(n){return u.apply(this,arguments)})},{key:"getHistory",value:(c=(0,i.A)((0,r.A)().m(function n(){var e,t,s,a=arguments;return(0,r.A)().w(function(n){for(;;)switch(n.p=n.n){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:g._U.page,t=a.length>1&&void 0!==a[1]?a[1]:g._U.pageSize,n.p=1,n.n=2,(0,A.g)(g.Ab.CHAT,{action:"history",page:e,pageSize:t});case 2:return s=n.v,n.a(2,(null==s?void 0:s.data)||[]);case 3:return n.p=3,n.v,n.a(2,this.loadLocalHistory())}},n,this,[[1,3]])})),function(){return c.apply(this,arguments)})},{key:"getConversation",value:(a=(0,i.A)((0,r.A)().m(function n(e){var t;return(0,r.A)().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,(0,A.g)(g.Ab.CHAT,{action:"conversation",conversationId:e});case 1:return t=n.v,n.a(2,(null==t?void 0:t.data)||null);case 2:return n.p=2,n.v,n.a(2,{messages:this.loadLocalHistory()})}},n,this,[[0,2]])})),function(n){return a.apply(this,arguments)})},{key:"clearHistory",value:(s=(0,i.A)((0,r.A)().m(function n(){var e,t=arguments;return(0,r.A)().w(function(n){for(;;)switch(n.p=n.n){case 0:return e=t.length>0&&void 0!==t[0]?t[0]:null,n.p=1,n.n=2,(0,A.g)(g.Ab.CHAT,{action:"clear",conversationId:e});case 2:n.v,n.n=4;break;case 3:n.p=3,n.v;case 4:return this.clearLocalHistory(),n.a(2,!0)}},n,this,[[1,3]])})),function(){return s.apply(this,arguments)})},{key:"deleteMessage",value:(t=(0,i.A)((0,r.A)().m(function n(e){var t;return(0,r.A)().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,(0,A.g)(g.Ab.CHAT,{action:"delete",messageId:e});case 1:return t=n.v,n.a(2,(null==t?void 0:t.success)||!1);case 2:return n.p=2,n.v,f().showToast({title:"åˆ é™¤å¤±è´¥",icon:"none"}),n.a(2,!1)}},n,null,[[0,2]])})),function(n){return t.apply(this,arguments)})},{key:"getPresetQuestions",value:(e=(0,i.A)((0,r.A)().m(function n(){return(0,r.A)().w(function(n){for(;;)if(0===n.n)return n.a(2,[{id:1,text:"ä»€ä¹ˆæ˜¯æ¯”å–»ï¼Ÿ"},{id:2,text:"ä»€ä¹ˆæ˜¯æ‹Ÿäººï¼Ÿ"},{id:3,text:"å¤è¯—ä¸­å¸¸ç”¨çš„æ„è±¡æœ‰å“ªäº›ï¼Ÿ"},{id:4,text:"å¦‚ä½•åŒºåˆ†è¿‘ä¹‰è¯ï¼Ÿ"},{id:5,text:"æ€æ ·ä¿®æ”¹ç—…å¥ï¼Ÿ"},{id:6,text:"å¦‚ä½•å†™å¥½ä½œæ–‡å¼€å¤´ï¼Ÿ"}])},n)})),function(){return e.apply(this,arguments)})},{key:"streamMessage",value:(n=(0,i.A)((0,r.A)().m(function n(e,t,s){var a;return(0,r.A)().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,this.sendMessage(e);case 1:return a=n.v,t&&t(a.reply),s&&s(a),n.a(2,a)}},n,this)})),function(e,t,s){return n.apply(this,arguments)})}]);var n,e,t,s,a,c,u}(),S=new j,N=t(4848);var k=function(){var n=(0,u.useState)([]),e=(0,o.A)(n,2),t=e[0],s=e[1],a=(0,u.useState)(""),h=(0,o.A)(a,2),m=h[0],p=h[1],v=(0,u.useState)(!1),A=(0,o.A)(v,2),g=A[0],y=A[1],w=(0,u.useState)(!1),x=(0,o.A)(w,2),j=x[0],k=x[1],T=(0,u.useState)(0),b=(0,o.A)(T,2),L=b[0],H=b[1],I=(0,u.useRef)(null);(0,u.useEffect)(function(){if(!j){var n=S.loadLocalHistory();n.length>0?s(n):s([{id:0,role:"assistant",content:"ä½ å¥½ï¼æˆ‘æ˜¯ AI è¯­æ–‡åŠ©æ‰‹ï¼Œå¯ä»¥å¸®ä½ è§£ç­”è¯­æ–‡å­¦ä¹ ä¸­çš„é—®é¢˜ã€‚\n\nä½ å¯ä»¥é—®æˆ‘ï¼š\nâ€¢ è¯è¯­é‡Šä¹‰\nâ€¢ è¯—è¯èµæ\nâ€¢ è¯­æ³•çŸ¥è¯†\nâ€¢ å†™ä½œæŠ€å·§"}]),k(!0)}return function(){I.current&&(clearTimeout(I.current),I.current=null)}},[j]),(0,d.useDidShow)(function(){I.current=setTimeout(function(){C()},300)});var C=function(){f().createSelectorQuery().select(".message-list").boundingClientRect().exec(function(n){if(n&&n[0]){n[0].height;H(Date.now())}})},D=function(){var n=(0,i.A)((0,r.A)().m(function n(){var e,a,i;return(0,r.A)().w(function(n){for(;;)switch(n.p=n.n){case 0:if(m.trim()&&!g){n.n=1;break}return n.a(2);case 1:return e={id:Date.now(),role:"user",content:m.trim()},s([].concat((0,c.A)(t),[e])),p(""),y(!0),I.current=setTimeout(C,100),n.p=2,n.n=3,S.sendMessage(m.trim());case 3:a=n.v,i={id:a.messageId||Date.now()+1,role:"assistant",content:a.reply},s(function(n){return[].concat((0,c.A)(n),[i])}),I.current=setTimeout(C,100),n.n=5;break;case 4:n.p=4,n.v,s(function(n){return[].concat((0,c.A)(n),[{id:Date.now()+1,role:"assistant",content:"æŠ±æ­‰ï¼Œæˆ‘é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œè¯·ç¨åå†è¯•ã€‚"}])}),I.current=setTimeout(C,100);case 5:return n.p=5,y(!1),n.f(5);case 6:return n.a(2)}},n,null,[[2,4,5,6]])}));return function(){return n.apply(this,arguments)}}(),E=function(){var n=(0,i.A)((0,r.A)().m(function n(e){var a,i,o;return(0,r.A)().w(function(n){for(;;)switch(n.p=n.n){case 0:return a={id:Date.now(),role:"user",content:e},s([].concat((0,c.A)(t),[a])),p(""),y(!0),I.current=setTimeout(C,100),n.p=1,n.n=2,S.sendMessage(e);case 2:i=n.v,o={id:i.messageId||Date.now()+1,role:"assistant",content:i.reply},s(function(n){return[].concat((0,c.A)(n),[o])}),I.current=setTimeout(C,100),n.n=4;break;case 3:n.p=3,n.v,s(function(n){return[].concat((0,c.A)(n),[{id:Date.now()+1,role:"assistant",content:"æŠ±æ­‰ï¼Œæˆ‘é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œè¯·ç¨åå†è¯•ã€‚"}])}),I.current=setTimeout(C,100);case 4:return n.p=4,y(!1),n.f(4);case 5:return n.a(2)}},n,null,[[1,3,4,5]])}));return function(e){return n.apply(this,arguments)}}();return(0,N.jsxs)(l.Ss,{className:"chat-page",children:[(0,N.jsxs)(l.BM,{scrollY:!0,scrollIntoView:"anchor-".concat(L),scrollWithAnimation:!0,className:"message-list",children:[t.map(function(n){return(0,N.jsxs)(l.Ss,{className:"message-item ".concat("user"===n.role?"user":"assistant"),children:["assistant"===n.role&&(0,N.jsx)(l.Ss,{className:"avatar",children:(0,N.jsx)(l.EY,{className:"avatar-emoji",children:"ğŸ¤–"})}),(0,N.jsx)(l.Ss,{className:"message-content ".concat(n.role),children:(0,N.jsx)(l.EY,{className:"message-text",children:n.content})}),"user"===n.role&&(0,N.jsx)(l.Ss,{className:"avatar user",children:(0,N.jsx)(l.EY,{className:"avatar-emoji",children:"ğŸ‘¤"})})]},n.id)}),(0,N.jsx)(l.EY,{id:"anchor-".concat(L),style:{display:"block",height:"2px"}}),g&&(0,N.jsxs)(l.Ss,{className:"message-item assistant",children:[(0,N.jsx)(l.Ss,{className:"avatar",children:(0,N.jsx)(l.EY,{className:"avatar-emoji",children:"ğŸ¤–"})}),(0,N.jsx)(l.Ss,{className:"message-content assistant typing",children:(0,N.jsxs)(l.Ss,{className:"typing-dots",children:[(0,N.jsx)(l.EY,{className:"dot",children:"."}),(0,N.jsx)(l.EY,{className:"dot",children:"."}),(0,N.jsx)(l.EY,{className:"dot",children:"."})]})})]}),0===t.length&&(0,N.jsxs)(l.Ss,{className:"empty-state",children:[(0,N.jsx)(l.EY,{className:"empty-icon",children:"ğŸ’¬"}),(0,N.jsx)(l.EY,{className:"empty-text",children:"å¼€å§‹ä½ çš„å­¦ä¹ ä¹‹æ—…"}),(0,N.jsx)(l.Ss,{className:"preset-questions",children:["ä»€ä¹ˆæ˜¯æ¯”å–»ï¼Ÿ","ä»€ä¹ˆæ˜¯æ‹Ÿäººï¼Ÿ","å¤è¯—ä¸­å¸¸ç”¨çš„æ„è±¡æœ‰å“ªäº›ï¼Ÿ","å¦‚ä½•åŒºåˆ†è¿‘ä¹‰è¯ï¼Ÿ","æ€æ ·ä¿®æ”¹ç—…å¥ï¼Ÿ","å¦‚ä½•å†™å¥½ä½œæ–‡å¼€å¤´ï¼Ÿ"].map(function(n,e){return(0,N.jsx)(l.Ss,{className:"preset-btn",onClick:function(){return E(n)},children:n},e)})})]})]}),(0,N.jsx)(l.Ss,{className:"input-area",children:(0,N.jsxs)(l.Ss,{className:"input-wrapper",children:[(0,N.jsx)(l.pd,{className:"chat-input",placeholder:"è¾“å…¥ä½ çš„é—®é¢˜...",value:m,onInput:function(n){return p(n.detail.value)},onConfirm:D,disabled:g,maxlength:500}),(0,N.jsx)(l.Ss,{className:"send-btn ".concat(m.trim()&&!g?"active":""),onClick:D,children:"å‘é€"})]})})]})};Page((0,a.createPageConfig)(k,"pages/chat/index",{root:{cn:[]}},{navigationBarTitleText:"AI åŠ©æ‰‹"}||{}))}},function(n){n.O(0,[907,96,76],function(){return e=3078,n(n.s=e);var e});n.O()}]);